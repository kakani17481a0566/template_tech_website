<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registration Form</title>
  <link rel="stylesheet" href="./css/register.css">
</head>

<body>
  <div class="container" id="register">
    <button class="close-button" onclick="closeForm()" href="index.html">Ã—</button>
    <h2>Registration Form</h2>

    <form id="registerForm"
      action="https://script.google.com/macros/s/AKfycbwDBNkVq4cjvyEO7h4U8Wp-S0041iNItpJaqvRoftXA0w5-MMjSfbryE1mYN_Huen1W/exec"
      method="POST">
      <!-- Google Sheets Integration -->
      <!-- Form submissions are sent to Google Sheets via Google Apps Script -->
      <!-- See GOOGLE_SHEETS_SETUP.md for detailed setup instructions -->

      <div class="form-group">
        <label for="firstName">Full Name</label>
        <div class="row">
          <input type="text" id="firstName" name="firstName" placeholder="First Name" required />
          <input type="text" id="lastName" name="lastName" placeholder="Last Name" required />
        </div>
      </div>

      <div class="form-group">
        <label for="dob">Date of Birth</label>
        <input type="date" id="dob" name="dob" required />
      </div>

      <div class="form-group">
        <label>Gender</label>
        <div class="gender-options">
          <label><input type="radio" name="gender" value="male" required /> Male</label>
          <label><input type="radio" name="gender" value="female" /> Female</label>
          <label><input type="radio" name="gender" value="other" /> Other</label>
        </div>
      </div>

      <div class="form-group">
        <label for="mobile">Phone Number</label>
        <div class="row">
          <select id="countryCode" name="countryCode" required style="flex: 0 0 120px;">
            <option value="+91" selected>ğŸ‡®ğŸ‡³ +91</option>
            <option value="+1">ğŸ‡ºğŸ‡¸ +1</option>
            <option value="+44">ğŸ‡¬ğŸ‡§ +44</option>
            <option value="+61">ğŸ‡¦ğŸ‡º +61</option>
            <option value="+81">ğŸ‡¯ğŸ‡µ +81</option>
            <option value="+86">ğŸ‡¨ğŸ‡³ +86</option>
            <option value="+33">ğŸ‡«ğŸ‡· +33</option>
            <option value="+49">ğŸ‡©ğŸ‡ª +49</option>
            <option value="+39">ğŸ‡®ğŸ‡¹ +39</option>
            <option value="+34">ğŸ‡ªğŸ‡¸ +34</option>
            <option value="+7">ğŸ‡·ğŸ‡º +7</option>
            <option value="+55">ğŸ‡§ğŸ‡· +55</option>
            <option value="+27">ğŸ‡¿ğŸ‡¦ +27</option>
            <option value="+82">ğŸ‡°ğŸ‡· +82</option>
            <option value="+65">ğŸ‡¸ğŸ‡¬ +65</option>
            <option value="+971">ğŸ‡¦ğŸ‡ª +971</option>
            <option value="+966">ğŸ‡¸ğŸ‡¦ +966</option>
            <option value="+60">ğŸ‡²ğŸ‡¾ +60</option>
            <option value="+62">ğŸ‡®ğŸ‡© +62</option>
            <option value="+63">ğŸ‡µğŸ‡­ +63</option>
            <option value="+66">ğŸ‡¹ğŸ‡­ +66</option>
            <option value="+84">ğŸ‡»ğŸ‡³ +84</option>
            <option value="+92">ğŸ‡µğŸ‡° +92</option>
            <option value="+880">ğŸ‡§ğŸ‡© +880</option>
            <option value="+94">ğŸ‡±ğŸ‡° +94</option>
            <option value="+977">ğŸ‡³ğŸ‡µ +977</option>
          </select>
          <input type="tel" id="mobile" name="mobile" pattern="[0-9]{10}" placeholder="e.g., 9876543210" required
            style="flex: 1;" />
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" name="email" placeholder="you@example.com" required />
      </div>

      <div class="form-group">
        <label for="address">Address</label>
        <input type="text" id="address" name="address" placeholder="Street / Locality" required />
      </div>

      <div class="form-group">
        <div class="row">
          <input type="text" name="city" placeholder="City" required />
          <input type="text" name="state" placeholder="State" required />
        </div>
      </div>

      <div class="form-group">
        <div class="row">
          <input type="text" name="pincode" placeholder="Pincode / Postal Code" pattern="[0-9]{6}" required />
          <input type="text" name="country" placeholder="Country" required />
        </div>
      </div>

      <div class="form-group">
        <label>Select Your Interests</label>
        <div class="dropdown-checkbox" id="interestDropdown">
          <button type="button" class="dropdown-checkbox-button" onclick="toggleDropdown()" id="dropdownToggleBtn">
            Select Interests
          </button>
          <div class="dropdown-checkbox-content">
            <label><input type="checkbox" name="interests[]" value="neuroPi" onchange="updateSelected()">
              NeuroPi</label>
            <label><input type="checkbox" name="interests[]" value="earlyLearning" onchange="updateSelected()"> Early
              Learning</label>
            <label><input type="checkbox" name="interests[]" value="specialEducation" onchange="updateSelected()">
              Special Education</label>
            <label><input type="checkbox" name="interests[]" value="sport" onchange="updateSelected()"> Sports</label>
            <label><input type="checkbox" name="interests[]" value="teenagers" onchange="updateSelected()">
              Teenagers</label>
            <label><input type="checkbox" name="interests[]" value="midlife" onchange="updateSelected()">
              Midlife</label>
            <label><input type="checkbox" name="interests[]" value="defence" onchange="updateSelected()">
              Defence</label>
            <label><input type="checkbox" name="interests[]" value="aerospace" onchange="updateSelected()">
              Aerospace</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <button type="submit" class="submit-button">Register</button>
      </div>
    </form>

  </div>

  <script>
    // --- Dropdown open/close ---
    function toggleDropdown() {
      const dd = document.getElementById("interestDropdown");
      dd.classList.toggle("open");
    }

    // Close when clicking outside
    document.addEventListener("click", function (e) {
      const dd = document.getElementById("interestDropdown");
      if (!dd) return;
      if (!dd.contains(e.target)) dd.classList.remove("open");
    });

    // Update button text with selected interests - shows count and names
    function updateSelected() {
      const checkboxes = document.querySelectorAll('#interestDropdown input[type="checkbox"]');
      const selected = Array.from(checkboxes)
        .filter(cb => cb.checked)
        .map(cb => cb.parentNode.textContent.trim());
      const btn = document.getElementById('dropdownToggleBtn');

      if (selected.length === 0) {
        // No selection
        btn.textContent = 'Select Interests';
      } else if (selected.length === 1) {
        // Single selection - just show the name
        btn.textContent = selected[0];
      } else {
        // Multiple selections - show count and names separated by commas
        btn.textContent = `${selected.length} Selected: ${selected.join(', ')}`;
      }
    }

    // Close button handler
    function closeForm() {
      window.location.href = 'index.html';
    }

    // Optional: init dropdown label on load
    (function () {
      const btn = document.getElementById('dropdownToggleBtn');
      if (btn) btn.textContent = 'Select Interests';
    })();
  </script>

  <!-- Google Sheets Form Handler -->
  <script src="./js/form-handler.js"></script>

</body>

</html>